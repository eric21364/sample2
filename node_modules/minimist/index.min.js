function hasKey(t,e){var n=t;e.slice(0,-1).forEach(function(t){n=n[t]||{}});var i=e[e.length-1];return i in n}function setKey(t,e,n){var i=t;e.slice(0,-1).forEach(function(t){void 0===i[t]&&(i[t]={}),i=i[t]});var r=e[e.length-1];void 0===i[r]||"boolean"==typeof i[r]?i[r]=n:Array.isArray(i[r])?i[r].push(n):i[r]=[i[r],n]}function isNumber(t){return"number"==typeof t?!0:/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function longest(t){return Math.max.apply(null,t.map(function(t){return t.length}))}module.exports=function(t,e){function o(t,e){var r=!n.strings[t]&&isNumber(e)?Number(e):e;setKey(a,t.split("."),r),(i[t]||[]).forEach(function(t){setKey(a,t.split("."),r)})}e||(e={});var n={bools:{},strings:{}};[].concat(e["boolean"]).filter(Boolean).forEach(function(t){n.bools[t]=!0}),[].concat(e.string).filter(Boolean).forEach(function(t){n.strings[t]=!0});var i={};Object.keys(e.alias||{}).forEach(function(t){i[t]=[].concat(e.alias[t]),i[t].forEach(function(e){i[e]=[t].concat(i[t].filter(function(t){return e!==t}))})});var r=e["default"]||{},a={_:[]};Object.keys(n.bools).forEach(function(t){o(t,void 0===r[t]?!1:r[t])});var s=[];-1!==t.indexOf("--")&&(s=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var h=0;h<t.length;h++){var l=t[h];if(/^--.+=/.test(l)){var c=l.match(/^--([^=]+)=([\s\S]*)$/);o(c[1],c[2])}else if(/^--no-.+/.test(l)){var u=l.match(/^--no-(.+)/)[1];o(u,!1)}else if(/^--.+/.test(l)){var u=l.match(/^--(.+)/)[1],f=t[h+1];void 0===f||/^-/.test(f)||n.bools[u]||(i[u]?n.bools[i[u]]:0)?/^(true|false)$/.test(f)?(o(u,"true"===f),h++):o(u,n.strings[u]?"":!0):(o(u,f),h++)}else if(/^-[^-]+/.test(l)){for(var p=l.slice(1,-1).split(""),d=!1,v=0;v<p.length;v++){var f=l.slice(v+2);if("-"!==f){if(/[A-Za-z]/.test(p[v])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){o(p[v],f),d=!0;break}if(p[v+1]&&p[v+1].match(/\W/)){o(p[v],l.slice(v+2)),d=!0;break}o(p[v],n.strings[p[v]]?"":!0)}else o(p[v],f)}var u=l.slice(-1)[0];d||"-"===u||(!t[h+1]||/^(-|--)[^-]/.test(t[h+1])||n.bools[u]||(i[u]?n.bools[i[u]]:0)?t[h+1]&&/true|false/.test(t[h+1])?(o(u,"true"===t[h+1]),h++):o(u,n.strings[u]?"":!0):(o(u,t[h+1]),h++))}else a._.push(n.strings._||!isNumber(l)?l:Number(l))}return Object.keys(r).forEach(function(t){hasKey(a,t.split("."))||(setKey(a,t.split("."),r[t]),(i[t]||[]).forEach(function(e){setKey(a,e.split("."),r[t])}))}),s.forEach(function(t){a._.push(t)}),a};