"use strict";function format(t){if(!t||"object"!=typeof t)throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!typeRegExp.test(n))throw new TypeError("invalid type");var i=n;if(e&&"object"==typeof e)for(var r,a=Object.keys(e).sort(),o=0;o<a.length;o++){if(r=a[o],!tokenRegExp.test(r))throw new TypeError("invalid parameter name");i+="; "+r+"="+qstring(e[r])}return i}function parse(t){if(!t)throw new TypeError("argument string is required");if("object"==typeof t&&(t=getcontenttype(t),"string"!=typeof t))throw new TypeError("content-type header is missing from object");if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),n=-1!==e?t.substr(0,e).trim():t.trim();if(!typeRegExp.test(n))throw new TypeError("invalid media type");var i,r,o,a=new ContentType(n.toLowerCase());for(paramRegExp.lastIndex=e;r=paramRegExp.exec(t);){if(r.index!==e)throw new TypeError("invalid parameter format");e+=r[0].length,i=r[1].toLowerCase(),o=r[2],'"'===o[0]&&(o=o.substr(1,o.length-2).replace(qescRegExp,"$1")),a.parameters[i]=o}if(-1!==e&&e!==t.length)throw new TypeError("invalid parameter format");return a}function getcontenttype(t){return"function"==typeof t.getHeader?t.getHeader("content-type"):"object"==typeof t.headers?t.headers&&t.headers["content-type"]:void 0}function qstring(t){var e=String(t);if(tokenRegExp.test(e))return e;if(e.length>0&&!textRegExp.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(quoteRegExp,"\\$1")+'"'}function ContentType(t){this.parameters=Object.create(null),this.type=t}var paramRegExp=/; *([!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) */g,textRegExp=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,tokenRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/,qescRegExp=/\\([\u000b\u0020-\u00ff])/g,quoteRegExp=/([\\"])/g,typeRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+\/[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;exports.format=format,exports.parse=parse;