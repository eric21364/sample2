function testCmd(e,t){return function(r){var i=setTimeout(function(){assert.fail("Never got stdout data.")},5e3),n=process.cwd();process.chdir(__dirname+"/_");var s=e.split(" "),a=spawn(s[0],s.slice(1).concat(t.map(String)));process.chdir(n),a.stderr.on("data",function(e){r.error(e),r.end()}),a.stdout.on("data",function(e){clearTimeout(i);var n=JSON.parse(e.toString());r.same(n.map(String),t.map(String)),r.end()})}}var spawn=require("child_process").spawn,test=require("tap").test;test("dotSlashEmpty",testCmd("./bin.js",[])),test("dotSlashArgs",testCmd("./bin.js",["a","b","c"])),test("nodeEmpty",testCmd("node bin.js",[])),test("nodeArgs",testCmd("node bin.js",["x","y","z"])),test("whichNodeEmpty",function(e){var t=spawn("which",["node"]);t.stdout.on("data",function(t){e.test(testCmd(t.toString().trim()+" bin.js",[])),e.end()}),t.stderr.on("data",function(t){assert.error(t),e.end()})}),test("whichNodeArgs",function(e){var t=spawn("which",["node"]);t.stdout.on("data",function(t){e.test(testCmd(t.toString().trim()+" bin.js",["q","r"])),e.end()}),t.stderr.on("data",function(t){e.error(t),e.end()})});