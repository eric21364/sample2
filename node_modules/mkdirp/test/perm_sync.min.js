var mkdirp=require("../"),path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("sync perm",function(e){e.plan(4);var t="/tmp/"+(Math.random()*(1<<30)).toString(16)+".json";mkdirp.sync(t,_0755),exists(t,function(r){e.ok(r,"file created"),fs.stat(t,function(t,r){e.ifError(t),e.equal(r.mode&_0777,_0755),e.ok(r.isDirectory(),"target not a directory")})})}),test("sync root perm",function(e){e.plan(3);var t="/tmp";mkdirp.sync(t,_0755),exists(t,function(r){e.ok(r,"file created"),fs.stat(t,function(t,r){e.ifError(t),e.ok(r.isDirectory(),"target not a directory")})})});