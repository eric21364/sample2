var mkdirp=require("../"),path=require("path"),test=require("tap").test,mockfs=require("mock-fs"),_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("opts.fs sync",function(e){e.plan(4);var t=Math.floor(Math.random()*Math.pow(16,4)).toString(16),r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),i=Math.floor(Math.random()*Math.pow(16,4)).toString(16),n="/beep/boop/"+[t,r,i].join("/"),s=mockfs.fs();mkdirp.sync(n,{fs:s,mode:_0755}),s.exists(n,function(t){e.ok(t,"created file"),s.stat(n,function(t,r){e.ifError(t),e.equal(r.mode&_0777,_0755),e.ok(r.isDirectory(),"target not a directory")})})});