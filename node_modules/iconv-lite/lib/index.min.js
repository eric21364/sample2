"use strict";var bomHandling=require("./bom-handling"),iconv=module.exports;iconv.encodings=null,iconv.defaultCharUnicode="ï¿½",iconv.defaultCharSingleByte="?",iconv.encode=function(e,t,r){e=""+(e||"");var i=iconv.getEncoder(t,r),n=i.write(e),s=i.end();return s&&s.length>0?Buffer.concat([n,s]):n},iconv.decode=function(e,t,r){"string"==typeof e&&(iconv.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),iconv.skipDecodeWarning=!0),e=new Buffer(""+(e||""),"binary"));var i=iconv.getDecoder(t,r),n=i.write(e),s=i.end();return s?n+s:n},iconv.encodingExists=function(e){try{return iconv.getCodec(e),!0}catch(t){return!1}},iconv.toEncoding=iconv.encode,iconv.fromEncoding=iconv.decode,iconv._codecDataCache={},iconv.getCodec=function(e){iconv.encodings||(iconv.encodings=require("../encodings"));for(var t=(""+e).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,""),r={};;){var i=iconv._codecDataCache[t];if(i)return i;var n=iconv.encodings[t];switch(typeof n){case"string":t=n;break;case"object":for(var s in n)r[s]=n[s];r.encodingName||(r.encodingName=t),t=n.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new n(r,iconv),iconv._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},iconv.getEncoder=function(e,t){var r=iconv.getCodec(e),i=new r.encoder(t,r);return r.bomAware&&t&&t.addBOM&&(i=new bomHandling.PrependBOM(i,t)),i},iconv.getDecoder=function(e,t){var r=iconv.getCodec(e),i=new r.decoder(t,r);return!r.bomAware||t&&t.stripBOM===!1||(i=new bomHandling.StripBOM(i,t)),i};var nodeVer="undefined"!=typeof process&&process.versions&&process.versions.node;if(nodeVer){var nodeVerArr=nodeVer.split(".").map(Number);(nodeVerArr[0]>0||nodeVerArr[1]>=10)&&require("./streams")(iconv),require("./extend-node")(iconv)}