"use strict";function parseAcceptEncoding(e){for(var t=e.split(","),r=!1,i=1,n=0,s=0;n<t.length;n++){var a=parseEncoding(t[n].trim(),n);a&&(t[s++]=a,r=r||specify("identity",a),i=Math.min(i,a.q||1))}return r||(t[s++]={encoding:"identity",q:i,i:n}),t.length=s,t}function parseEncoding(e,t){var r=simpleEncodingRegExp.exec(e);if(!r)return null;var i=r[1],n=1;if(r[2])for(var s=r[2].split(";"),t=0;t<s.length;t++){var a=s[t].trim().split("=");if("q"===a[0]){n=parseFloat(a[1]);break}}return{encoding:i,q:n,i:t}}function getEncodingPriority(e,t,r){for(var i={o:-1,q:0,s:0},n=0;n<t.length;n++){var s=specify(e,t[n],r);s&&(i.s-s.s||i.q-s.q||i.o-s.o)<0&&(i=s)}return i}function specify(e,t,r){var i=0;if(t.encoding.toLowerCase()===e.toLowerCase())i|=1;else if("*"!==t.encoding)return null;return{i:r,o:t.i,q:t.q,s:i}}function preferredEncodings(e,t){var r=parseAcceptEncoding(e||"");if(!t)return r.filter(isQuality).sort(compareSpecs).map(getFullEncoding);var i=t.map(function(e,t){return getEncodingPriority(e,r,t)});return i.filter(isQuality).sort(compareSpecs).map(function(e){return t[i.indexOf(e)]})}function compareSpecs(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function getFullEncoding(e){return e.encoding}function isQuality(e){return e.q>0}module.exports=preferredEncodings,module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;