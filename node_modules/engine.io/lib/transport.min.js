function noop(){}function Transport(e){this.readyState="open",this.discarded=!1}var EventEmitter=require("events").EventEmitter,parser=require("engine.io-parser"),util=require("util"),debug=require("debug")("engine:transport");module.exports=Transport,util.inherits(Transport,EventEmitter),Transport.prototype.discard=function(){this.discarded=!0},Transport.prototype.onRequest=function(e){debug("setting request"),this.req=e},Transport.prototype.close=function(e){"closed"!==this.readyState&&"closing"!==this.readyState&&(this.readyState="closing",this.doClose(e||noop))},Transport.prototype.onError=function(e,t){if(this.listeners("error").length){var r=new Error(e);r.type="TransportError",r.description=t,this.emit("error",r)}else debug("ignored transport error %s (%s)",e,t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onData=function(e){this.onPacket(parser.decodePacket(e))},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};