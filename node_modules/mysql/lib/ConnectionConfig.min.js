function ConnectionConfig(e){"string"==typeof e&&(e=ConnectionConfig.parseUrl(e)),this.host=e.host||"localhost",this.port=e.port||3306,this.localAddress=e.localAddress,this.socketPath=e.socketPath,this.user=e.user||void 0,this.password=e.password||void 0,this.database=e.database,this.connectTimeout=void 0===e.connectTimeout?1e4:e.connectTimeout,this.insecureAuth=e.insecureAuth||!1,this.supportBigNumbers=e.supportBigNumbers||!1,this.bigNumberStrings=e.bigNumberStrings||!1,this.dateStrings=e.dateStrings||!1,this.debug=e.debug,this.trace=e.trace!==!1,this.stringifyObjects=e.stringifyObjects||!1,this.timezone=e.timezone||"local",this.flags=e.flags||"",this.queryFormat=e.queryFormat,this.pool=e.pool||void 0,this.ssl="string"==typeof e.ssl?ConnectionConfig.getSSLProfile(e.ssl):e.ssl||!1,this.multipleStatements=e.multipleStatements||!1,this.typeCast=void 0===e.typeCast?!0:e.typeCast," "===this.timezone[0]&&(this.timezone="+"+this.timezone.substr(1)),this.ssl&&(this.ssl.rejectUnauthorized=this.ssl.rejectUnauthorized!==!1),this.maxPacketSize=0,this.charsetNumber=e.charset?ConnectionConfig.getCharsetNumber(e.charset):e.charsetNumber||Charsets.UTF8_GENERAL_CI;var t=ConnectionConfig.getDefaultFlags(e);this.clientFlags=ConnectionConfig.mergeFlags(t,e.flags)}var urlParse=require("url").parse,ClientConstants=require("./protocol/constants/client"),Charsets=require("./protocol/constants/charsets"),SSLProfiles=null;module.exports=ConnectionConfig,ConnectionConfig.mergeFlags=function(e,t){var r=ConnectionConfig.parseFlagList(e),i=ConnectionConfig.parseFlagList(t);for(var n in i)r[n]!==!1&&(r[n]=i[n]);var s=0;for(var n in r)r[n]&&(s|=ClientConstants["CLIENT_"+n]||0);return s},ConnectionConfig.getCharsetNumber=function(e){var t=Charsets[e.toUpperCase()];if(void 0===t)throw new TypeError("Unknown charset '"+e+"'");return t},ConnectionConfig.getDefaultFlags=function(e){var t=["-COMPRESS","-CONNECT_ATTRS","+CONNECT_WITH_DB","+FOUND_ROWS","+IGNORE_SIGPIPE","+IGNORE_SPACE","+LOCAL_FILES","+LONG_FLAG","+LONG_PASSWORD","+MULTI_RESULTS","+ODBC","-PLUGIN_AUTH","+PROTOCOL_41","+PS_MULTI_RESULTS","+RESERVED","+SECURE_CONNECTION","+TRANSACTIONS"];return e&&e.multipleStatements&&t.push("+MULTI_STATEMENTS"),t},ConnectionConfig.getSSLProfile=function(e){SSLProfiles||(SSLProfiles=require("./protocol/constants/ssl_profiles"));var t=SSLProfiles[e];if(void 0===t)throw new TypeError("Unknown SSL profile '"+e+"'");return t},ConnectionConfig.parseFlagList=function(e){var t=Object.create(null);if(!e)return t;for(var r=Array.isArray(e)?e:String(e||"").toUpperCase().split(/\s*,+\s*/),i=0;i<r.length;i++){var n=r[i],s=1,a=n[0];void 0!==a&&("-"!==a&&"+"!==a&&(s=0,a="+"),t[n.substr(s)]="+"===a)}return t},ConnectionConfig.parseUrl=function(e){e=urlParse(e,!0);var t={host:e.hostname,port:e.port,database:e.pathname.substr(1)};if(e.auth){var r=e.auth.split(":");t.user=r.shift(),t.password=r.join(":")}if(e.query)for(var i in e.query){var n=e.query[i];try{t[i]=JSON.parse(n)}catch(s){t[i]=n}}return t};