var mkdirp=require("../"),path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("rel",function(e){e.plan(5);var t=Math.floor(Math.random()*Math.pow(16,4)).toString(16),r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),i=Math.floor(Math.random()*Math.pow(16,4)).toString(16),n=process.cwd();process.chdir("/tmp");var s=[t,r,i].join("/");mkdirp(s,_0755,function(t){e.ifError(t),exists(s,function(t){e.ok(t,"file created"),fs.stat(s,function(t,r){e.ifError(t),process.chdir(n),e.equal(r.mode&_0777,_0755),e.ok(r.isDirectory(),"target not a directory")})})})});