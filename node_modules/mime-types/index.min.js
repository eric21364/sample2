"use strict";function charset(t){if(!t||"string"!=typeof t)return!1;var e=extractTypeRegExp.exec(t),n=e&&db[e[1].toLowerCase()];return n&&n.charset?n.charset:e&&textTypeRegExp.test(e[1])?"UTF-8":!1}function contentType(t){if(!t||"string"!=typeof t)return!1;var e=-1===t.indexOf("/")?exports.lookup(t):t;if(!e)return!1;if(-1===e.indexOf("charset")){var n=exports.charset(e);n&&(e+="; charset="+n.toLowerCase())}return e}function extension(t){if(!t||"string"!=typeof t)return!1;var e=extractTypeRegExp.exec(t),n=e&&exports.extensions[e[1].toLowerCase()];return n&&n.length?n[0]:!1}function lookup(t){if(!t||"string"!=typeof t)return!1;var e=extname("x."+t).toLowerCase().substr(1);return e?exports.types[e]||!1:!1}function populateMaps(t,e){var n=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function(i){var r=db[i],a=r.extensions;if(a&&a.length){t[i]=a;for(var s=0;s<a.length;s++){var o=a[s];if(e[o]){var h=n.indexOf(db[e[o]].source),l=n.indexOf(r.source);if("application/octet-stream"!==e[o]&&(h>l||h===l&&"application/"===e[o].substr(0,12)))continue}e[o]=i}}})}var db=require("mime-db"),extname=require("path").extname,extractTypeRegExp=/^\s*([^;\s]*)(?:;|\s|$)/,textTypeRegExp=/^text\//i;exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=contentType,exports.extension=extension,exports.extensions=Object.create(null),exports.lookup=lookup,exports.types=Object.create(null),populateMaps(exports.extensions,exports.types);