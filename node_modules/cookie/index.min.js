"use strict";function parse(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(pairSplitRegExp),o=n.decode||decode,a=0;a<i.length;a++){var s=i[a],u=s.indexOf("=");if(!(0>u)){var f=s.substr(0,u).trim(),l=s.substr(++u,s.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),void 0==r[f]&&(r[f]=tryDecode(l,o))}}return r}function serialize(e,t,r){var n=r||{},i=n.encode||encode;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!fieldContentRegExp.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(s)}if(n.domain){if(!fieldContentRegExp.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!fieldContentRegExp.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite){var u="string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite;switch(u){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function tryDecode(e,t){try{return t(e)}catch(r){return e}}exports.parse=parse,exports.serialize=serialize;var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;