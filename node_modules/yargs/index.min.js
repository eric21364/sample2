function Argv(e,t){function v(e){var t=Parser(e,s),o=t.argv,h=t.aliases;o.$0=r.$0,r.parsed=t,p&&~o._.indexOf(p)&&(r.showCompletionScript(),f&&process.exit(0));for(var y,v=Object.keys(r.getCommandHandlers()),m=0;void 0!==(y=v[m]);m++)if(~o._.indexOf(y))return r.getCommandHandlers()[y](r.reset()),r.argv;return Object.keys(o).forEach(function(e){if(e===l&&o[e])r.showHelp("log"),f&&process.exit(0);else if(e===c&&o[e])i.showVersion(),f&&process.exit(0);else if(e===d)return void n.getCompletion(function(e){(e||[]).forEach(function(e){console.log(e)}),f&&process.exit(0)})}),a.nonOptionCount(o),a.missingArgumentValue(o),a.requiredArguments(o),u&&a.unknownArguments(o,h),a.customChecks(o,h),a.implications(o),g(o),o}function g(e){Object.keys(s.key).forEach(function(t){"undefined"==typeof e[t]&&(e[t]=void 0)})}e=e||[];var r={},n=null,i=null,a=null;t||(t=process.cwd()),r.$0=process.argv.slice(0,2).map(function(e,r){if(0!==r||!/\b(node|iojs)$/.test(e)){var n=rebase(t,e);return e.match(/^\//)&&n.length<e.length?n:e}}).join(" ").trim(),void 0!==process.env._&&process.argv[1]===process.env._&&(r.$0=process.env._.replace(path.dirname(process.execPath)+"/",""));var s;r.resetOptions=r.reset=function(){return s={array:[],"boolean":[],string:[],narg:{},key:{},alias:{},"default":{},defaultDescription:{},requiresArg:[],count:[],normalize:[],config:[]},i=Usage(r),a=Validation(r,i),n=Completion(r,i),h={},f=!0,u=!1,l=null,c=null,d=null,o={},r.parsed=!1,r},r.resetOptions(),r["boolean"]=function(e){return s["boolean"].push.apply(s["boolean"],[].concat(e)),r},r.array=function(e){return s.array.push.apply(s.array,[].concat(e)),r},r.nargs=function(e,t){return"object"==typeof e?Object.keys(e).forEach(function(t){r.nargs(t,e[t])}):s.narg[e]=t,r},r.normalize=function(e){return s.normalize.push.apply(s.normalize,[].concat(e)),r},r.config=function(e){return s.config.push.apply(s.config,[].concat(e)),r},r.example=function(e,t){return i.example(e,t),r},r.command=function(e,t,n){return i.command(e,t),n&&(o[e]=n),r};var o={};r.getCommandHandlers=function(){return o},r.string=function(e){return s.string.push.apply(s.string,[].concat(e)),r},r["default"]=function(e,t,n){return"object"==typeof e?Object.keys(e).forEach(function(t){r["default"](t,e[t])}):("function"==typeof t&&(n=i.functionDescription(t,n),t=t.call()),s.defaultDescription[e]=n,s["default"][e]=t),r},r.alias=function(e,t){return"object"==typeof e?Object.keys(e).forEach(function(t){r.alias(t,e[t])}):s.alias[e]=(s.alias[e]||[]).concat(t),r},r.count=function(e){return s.count.push.apply(s.count,[].concat(e)),r};var h={};r.demand=r.required=r.require=function(e,t){return"number"==typeof e?(h._||(h._={count:0,msg:null}),h._.count+=e,h._.msg=t):Array.isArray(e)?e.forEach(function(e){r.demand(e,t)}):"string"==typeof t?h[e]={msg:t}:(t===!0||"undefined"==typeof t)&&(h[e]={msg:void 0}),r},r.getDemanded=function(){return h},r.requiresArg=function(e){return s.requiresArg.push.apply(s.requiresArg,[].concat(e)),r},r.implies=function(e,t){return a.implies(e,t),r},r.usage=function(e,t){return t||"object"!=typeof e||(t=e,e=null),i.usage(e),t&&r.options(t),r},r.epilogue=r.epilog=function(e){return i.epilog(e),r},r.fail=function(e){return i.failFn(e),r},r.check=function(e){return a.check(e),r},r.defaults=r["default"],r.describe=function(e,t){return s.key[e]=!0,i.describe(e,t),r},r.parse=function(e){return v(e)},r.option=r.options=function(e,t){if("object"==typeof e)Object.keys(e).forEach(function(t){r.options(t,e[t])});else{assert("object"==typeof t,"second argument to option must be an object"),s.key[e]=!0,t.alias&&r.alias(e,t.alias);var n=t.demand||t.required||t.require;n&&r.demand(e,n),"default"in t&&r["default"](e,t["default"]),"nargs"in t&&r.nargs(e,t.nargs),(t["boolean"]||"boolean"===t.type)&&(r["boolean"](e),t.alias&&r["boolean"](t.alias)),(t.array||"array"===t.type)&&(r.array(e),t.alias&&r.array(t.alias)),(t.string||"string"===t.type)&&(r.string(e),t.alias&&r.string(t.alias)),(t.count||"count"===t.type)&&r.count(e);var i=t.describe||t.description||t.desc;i&&r.describe(e,i),t.requiresArg&&r.requiresArg(e)}return r},r.getOptions=function(){return s},r.wrap=function(e){return i.wrap(e),r};var u=!1;r.strict=function(){return u=!0,r},r.getStrict=function(){return u},r.showHelp=function(t){return r.parsed||v(e),i.showHelp(t),r};var c=null;r.version=function(e,t,n){return c=t||"version",i.version(e),r["boolean"](c),r.describe(c,n||"Show version number"),r};var l=null;r.addHelpOpt=function(e,t){return l=e,r["boolean"](e),r.describe(e,t||"Show help"),r},r.showHelpOnFail=function(e,t){return i.showHelpOnFail(e,t),r};var f=!0;r.exitProcess=function(e){return"boolean"!=typeof e&&(e=!0),f=e,r},r.getExitProcess=function(){return f},r.help=function(){return arguments.length>0?r.addHelpOpt.apply(r,arguments):(r.parsed||v(e),i.help())};var d=null,p=null;return r.completion=function(e,t,i){return"function"==typeof t&&(i=t,t=null),p=e,d=n.completionKey,r.command(p,t||"generate bash completion script"),i&&n.registerFunction(i),r},r.showCompletionScript=function(e){return e=e||r.$0,console.log(n.generateCompletionScript(e)),r},r.getUsageInstance=function(){return i},r.getValidationInstance=function(){return a},r.terminalWidth=function(){return require("window-size").width},Object.defineProperty(r,"argv",{get:function(){var t=null;try{t=v(e)}catch(r){i.fail(r.message)}return t},enumerable:!0}),sigletonify(r),r}function rebase(e,t){return path.relative(e,t)}function sigletonify(e){Object.keys(e).forEach(function(t){"argv"===t?Argv.__defineGetter__(t,e.__lookupGetter__(t)):Argv[t]="function"==typeof e[t]?e[t].bind(e):e[t]})}var assert=require("assert"),path=require("path"),Completion=require("./lib/completion"),Parser=require("./lib/parser"),Usage=require("./lib/usage"),Validation=require("./lib/validation");Argv(process.argv.slice(2));var exports=module.exports=Argv;exports.rebase=rebase;