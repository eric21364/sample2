!function(e){"use strict";var t=Math.PI/180,r={version:"@@version",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},isDragging:function(){var e=r.DD;return e?e.isDragging:!1},isDragReady:function(){var e=r.DD;return e?!!e.node:!1},_addId:function(e,t){void 0!==t&&(this.ids[t]=e)},_removeId:function(e){void 0!==e&&delete this.ids[e]},_addName:function(e,t){t&&(this.names[t]||(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(e){var r=this.names[e];if(r){for(var i=0;i<r.length;i++){var n=r[i];n._id===t&&r.splice(i,1)}0===r.length&&delete this.names[e]}}},getAngle:function(e){return this.angleDeg?e*t:e},_detectIE:function(e){var t=e.indexOf("msie ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var r=e.indexOf("trident/");if(r>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("edge/");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):!1},_parseUA:function(e){var t=e.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),s=!!e.match(/IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",isIE:r._detectIE(t),mobile:n,ieMobile:s}},UA:void 0},i="undefined"!=typeof e?e:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{};if(r.UA=r._parseUA(i.navigator&&i.navigator.userAgent||""),i.Konva&&console.error("Konva instance is already exist in current eviroment. Please use only one instance."),i.Konva=r,r.global=i,"object"==typeof exports){if(i.window&&i.window.document)r.document=i.window.document,r.window=i.window;else{var n=require("canvas"),s=require("jsdom").jsdom;r.window=s("<!DOCTYPE html><html><head></head><body></body></html>").defaultView,r.document=r.window.document,r.window.Image=n.Image,r._nodeCanvas=n}return void(module.exports=r)}"function"==typeof define&&define.amd&&define(function(){return r}),r.document=document,r.window=window}("undefined"!=typeof global?global:window);