function acornShimPrepare(e){var t=new stream.Transform;if(e==path.resolve(__dirname,"../src/index.js")){var r=!1;t._transform=function(e,t,n){r?n():(r=!0,n(null,ACORN_PLACEHOLDER))}}else t._transform=function(e,t,r){r(null,e)};return t}function acornShimComplete(){var e=new stream.Transform,t="";return e._transform=function(e,r,n){t+=e.toString("utf8"),n()},e._flush=function(r){e.push(t.replace(ACORN_PLACEHOLDER,"module.exports = typeof acorn != 'undefined' ? acorn : require(\"./acorn\")")),r(null)},e}var fs=require("fs"),path=require("path"),stream=require("stream"),browserify=require("browserify"),babel=require("babel-core"),babelify=require("babelify").configure({loose:"all"});process.chdir(path.resolve(__dirname,"..")),browserify({standalone:"acorn"}).plugin(require("browserify-derequire")).transform(babelify).require("./src/index.js",{entry:!0}).bundle().on("error",function(e){console.log("Error: "+e.message)}).pipe(fs.createWriteStream("dist/acorn.js"));var ACORN_PLACEHOLDER="this_function_call_should_be_replaced_with_a_call_to_load_acorn()";browserify({standalone:"acorn.loose"}).plugin(require("browserify-derequire")).transform(acornShimPrepare).transform(babelify).require("./src/loose/index.js",{entry:!0}).bundle().on("error",function(e){console.log("Error: "+e.message)}).pipe(acornShimComplete()).pipe(fs.createWriteStream("dist/acorn_loose.js")),browserify({standalone:"acorn.walk"}).plugin(require("browserify-derequire")).transform(acornShimPrepare).transform(babelify).require("./src/walk/index.js",{entry:!0}).bundle().on("error",function(e){console.log("Error: "+e.message)}).pipe(acornShimComplete()).pipe(fs.createWriteStream("dist/walk.js")),babel.transformFile("./src/bin/acorn.js",function(e,t){return e?console.log("Error: "+e.message):void fs.writeFile("bin/acorn",t.code,function(e){if(e)return console.log("Error: "+e.message);if("win32"!==process.platform){var t=fs.statSync("bin/acorn"),r=t.mode|parseInt("111",8);fs.chmodSync("bin/acorn",r)}})});