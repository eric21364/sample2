function mapArrayBufferViews(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var a=new Uint8Array(n.byteLength);a.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=a.buffer}t[e]=i}}}function BlobBuilderConstructor(t,e){e=e||{};var n=new BlobBuilder;mapArrayBufferViews(t);for(var i=0;i<t.length;i++)n.append(t[i]);return e.type?n.getBlob(e.type):n.getBlob()}function BlobConstructor(t,e){return mapArrayBufferViews(t),new Blob(t,e||{})}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;module.exports=function(){return blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}();