function flush(){for(;head.next;){head=head.next;var t=head.task;head.task=void 0;var e=head.domain;e&&(head.domain=void 0,e.enter());try{t()}catch(n){if(isNodeJS)throw e&&e.exit(),setTimeout(flush,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}flushing=!1}function asap(t){tail=tail.next={task:t,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestFlush())}var head={task:void 0,next:null},tail=head,flushing=!1,requestFlush=void 0,isNodeJS=!1;if("undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestFlush=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestFlush="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestFlush=function(){channel.port2.postMessage(0)}}else requestFlush=function(){setTimeout(flush,0)};module.exports=asap;