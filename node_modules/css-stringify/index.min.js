function Compiler(t){t=t||{},this.compress=t.compress,this.indentation=t.indent}module.exports=function(t,e){return new Compiler(e).compile(t)},Compiler.prototype.compile=function(t){return t.stylesheet.rules.map(this.visit,this).join(this.compress?"":"\n\n")},Compiler.prototype.visit=function(t){return t.charset?this.charset(t):t.keyframes?this.keyframes(t):t.media?this.media(t):t["import"]?this["import"](t):this.rule(t)},Compiler.prototype["import"]=function(t){return"@import "+t["import"]+";"},Compiler.prototype.media=function(t){return this.compress?"@media "+t.media+"{"+t.rules.map(this.visit,this).join("")+"}":"@media "+t.media+" {\n"+this.indent(1)+t.rules.map(this.visit,this).join("\n\n")+this.indent(-1)+"\n}"},Compiler.prototype.charset=function(t){return this.compress?"@charset "+t.charset+";":"@charset "+t.charset+";\n"},Compiler.prototype.keyframes=function(t){return this.compress?"@"+(t.vendor||"")+"keyframes "+t.name+"{"+t.keyframes.map(this.keyframe,this).join("")+"}":"@"+(t.vendor||"")+"keyframes "+t.name+" {\n"+this.indent(1)+t.keyframes.map(this.keyframe,this).join("\n")+this.indent(-1)+"}"},Compiler.prototype.keyframe=function(t){return this.compress?t.values.join(",")+"{"+t.declarations.map(this.declaration,this).join(";")+"}":this.indent()+t.values.join(", ")+" {\n"+this.indent(1)+t.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}\n"},Compiler.prototype.rule=function(t){var e=this.indent();return this.compress?t.selectors.join(",")+"{"+t.declarations.map(this.declaration,this).join(";")+"}":t.selectors.map(function(t){return e+t}).join(",\n")+" {\n"+this.indent(1)+t.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}"},Compiler.prototype.declaration=function(t){return this.compress?t.property+":"+t.value:this.indent()+t.property+": "+t.value},Compiler.prototype.indent=function(t){return this.level=this.level||1,null!=t?(this.level+=t,""):Array(this.level).join(this.indentation||"  ")};