"use strict";function nulls(e){return null!=e&&""!==e}function joinClasses(e){return(Array.isArray(e)?e.map(joinClasses):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(nulls).join(" ")}function jade_encode_char(e){return jade_encode_html_rules[e]||e}function jade_escape(e){var t=String(e).replace(jade_match_html,jade_encode_char);return t===""+e?e:t}exports.merge=function e(t,r){if(1===arguments.length){for(var i=t[0],n=1;n<t.length;n++)i=e(i,t[n]);return i}var s=t["class"],a=r["class"];(s||a)&&(s=s||[],a=a||[],Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]),t["class"]=s.concat(a).filter(nulls));for(var o in r)"class"!=o&&(t[o]=r[o]);return t},exports.joinClasses=joinClasses,exports.cls=function(e,t){for(var r=[],i=0;i<e.length;i++)t&&t[i]?r.push(exports.escape(joinClasses([e[i]]))):r.push(joinClasses(e[i]));var n=joinClasses(r);return n.length?' class="'+n+'"':""},exports.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},exports.attr=function(e,t,r,i){return"style"===e&&(t=exports.style(t)),"boolean"==typeof t||null==t?t?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof t?(-1!==JSON.stringify(t).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),t&&"function"==typeof t.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(t).replace(/'/g,"&apos;")+"'"):r?(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+exports.escape(t)+'"'):(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t+'"')},exports.attrs=function(e,t){var r=[],i=Object.keys(e);if(i.length)for(var n=0;n<i.length;++n){var s=i[n],a=e[s];"class"==s?(a=joinClasses(a))&&r.push(" "+s+'="'+a+'"'):r.push(exports.attr(s,a,!1,t))}return r.join("")};var jade_encode_html_rules={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},jade_match_html=/[&<>"]/g;exports.escape=jade_escape,exports.rethrow=function n(e,t,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||i))throw e.message+=" on line "+r,e;try{i=i||require("fs").readFileSync(t,"utf8")}catch(s){n(e,null,r)}var a=3,o=i.split("\n"),u=Math.max(r-a,0),c=Math.min(o.length,r+a),a=o.slice(u,c).map(function(e,t){var i=t+u+1;return(i==r?"  > ":"    ")+i+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+r+"\n"+a+"\n\n"+e.message,e},exports.DebugItem=function(e,t){this.lineno=e,this.filename=t};