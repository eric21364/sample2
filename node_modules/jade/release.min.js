"use strict";var fs=require("fs"),pr=require("pull-request"),readdirp=require("lsr").sync,TOKEN=JSON.parse(fs.readFileSync(__dirname+"/.release.json","utf8")),version=require("./package.json").version,compiledWebsite=require("./docs/stop.js");compiledWebsite.then(function(){var t=readdirp(__dirname+"/docs/out").filter(function(t){return t.isFile()}).map(function(t){return{path:t.path.replace(/^\.\//,""),content:fs.readFileSync(t.fullPath)}});return pr.commit("jadejs","jade",{branch:"gh-pages",message:"Update website for "+version,updates:t},{auth:{type:"oauth",token:TOKEN}})}).then(function(){}).done(function(){console.log("website published")});