function PoolConnection(e,t){Connection.call(this,t),this._pool=e,Events.usingDomains&&(this.domain=e.domain),this.on("end",this._removeFromPool),this.on("error",function(e){e.fatal&&this._removeFromPool()})}var inherits=require("util").inherits,Connection=require("./Connection"),Events=require("events");module.exports=PoolConnection,inherits(PoolConnection,Connection),PoolConnection.prototype.release=function(){var e=this._pool;return!e||e._closed?void 0:e.releaseConnection(this)},PoolConnection.prototype._realEnd=Connection.prototype.end,PoolConnection.prototype.end=function(){console.warn("Calling conn.end() to release a pooled connection is deprecated. In next version calling conn.end() will be restored to default conn.end() behavior. Use conn.release() instead."),this.release()},PoolConnection.prototype.destroy=function(){Connection.prototype.destroy.apply(this,arguments),this._removeFromPool(this)},PoolConnection.prototype._removeFromPool=function(){if(this._pool&&!this._pool._closed){var e=this._pool;this._pool=null,e._purgeConnection(this)}};