"use strict";function createWriteHead(t,e){var n=!1;return function(r){var i=setWriteHeadHeaders.apply(this,arguments);n||(n=!0,e.call(this),"number"==typeof i[0]&&this.statusCode!==i[0]&&(i[0]=this.statusCode,i.length=1)),t.apply(this,i)}}function setWriteHeadHeaders(t){var e=arguments.length,n=e>1&&"string"==typeof arguments[1]?2:1,r=e>=n+1?arguments[n]:void 0;if(this.statusCode=t,Array.isArray(r))for(var i=0,a=r.length;a>i;++i)this.setHeader(r[i][0],r[i][1]);else if(r)for(var s=Object.keys(r),i=0;i<s.length;i++){var o=s[i];o&&this.setHeader(o,r[o])}for(var h=new Array(Math.min(e,n)),i=0;i<h.length;i++)h[i]=arguments[i];return h}var slice=Array.prototype.slice;module.exports=function(t,e){if(!t)throw new TypeError("argument res is required");if("function"!=typeof e)throw new TypeError("argument listener must be a function");t.writeHead=createWriteHead(t.writeHead,e)};